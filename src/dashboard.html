<!-- <!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background-color: #1e1e1e;
      color: #f5f5f5;
      padding: 2em;
    }
    h1 {
      text-align: center;
      color: #fff;
      margin-bottom: 1em;
    }
    .summary {
      text-align: center;
      font-size: 1.1em;
      margin-bottom: 2em;
    }
    .progress-container {
      width: 80%;
      background-color: #333;
      border-radius: 6px;
      margin: 1em auto;
      height: 25px;
      overflow: hidden;
      display: flex;
    }
    .progress-human {
      background-color: #4caf50;
      height: 100%;
      transition: width 0.6s ease;
    }
    .progress-ai {
      background-color: #f44336;
      height: 100%;
      transition: width 0.6s ease;
    }
    .chart-container {
      position: relative;
      width: 80%;
      margin: 2em auto;
    }
    .controls {
      text-align: center;
      margin-top: 2em;
    }
    .btn {
      background-color: #2196f3;
      border: none;
      border-radius: 6px;
      color: #fff;
      padding: 8px 16px;
      font-size: 0.95em;
      cursor: pointer;
      transition: background 0.2s ease;
    }
    .btn:hover {
      background-color: #1976d2;
    }
  </style>
</head>
<body>
  <h1>AI vs Human Code Overview</h1>
  <div id="summary" class="summary"></div>

  <div class="progress-container">
    <div id="bar-human" class="progress-human"></div>
    <div id="bar-ai" class="progress-ai"></div>
  </div>

  <div class="chart-container">
    <canvas id="pieChart"></canvas>
  </div>

  <div class="controls">
    <button id="resetBtn" class="btn">üîÑ Reset Stats</button>
  </div>

  <script>
    const vscode = acquireVsCodeApi(); // connect to extension
    vscode.postMessage('ready');       // tell extension dashboard is ready

    let chart;
    const ctx = document.getElementById('pieChart').getContext('2d');

    function render(human, ai) {
      const total = human + ai || 1;
      const humanPct = ((human / total) * 100).toFixed(2);
      const aiPct = ((ai / total) * 100).toFixed(2);

      document.getElementById('summary').innerHTML = `
        üë®‚Äçüíª <b>Human:</b> ${human} lines (${humanPct}%)
        <br>ü§ñ <b>AI:</b> ${ai} lines (${aiPct}%)
        <br><br>üìä <b>Total:</b> ${total} lines
      `;
      document.getElementById('bar-human').style.width = humanPct + '%';
      document.getElementById('bar-ai').style.width = aiPct + '%';

      if (chart) chart.destroy();
      chart = new Chart(ctx, {
        type: 'doughnut',
        data: {
          labels: ['Human', 'AI'],
          datasets: [{
            data: [human, ai],
            backgroundColor: ['#4caf50', '#f44336'],
            borderColor: '#1e1e1e',
            borderWidth: 2,
          }],
        },
        options: {
          plugins: {
            legend: {
              position: 'bottom',
              labels: { color: '#f5f5f5', font: { size: 14 } },
            },
          },
        },
      });
    }

    // Initial render from injected vars
    const humanInit = typeof HUMAN_VALUE !== 'undefined' ? HUMAN_VALUE : 0;
    const aiInit = typeof AI_VALUE !== 'undefined' ? AI_VALUE : 0;
    render(humanInit, aiInit);

    // üîÑ Live updates from extension.ts
    window.addEventListener('message', event => {
      const { human, ai } = event.data || {};
      if (typeof human === 'number' && typeof ai === 'number') {
        render(human, ai);
      }
    });

    // üîò Reset button
    document.getElementById('resetBtn').addEventListener('click', () => {
      vscode.postMessage({ command: 'reset' });
    });
  </script>
</body>
</html> -->






<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background-color: #1e1e1e;
      color: #f5f5f5;
      margin: 0;
      padding: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
    }

    .card {
      background-color: #252526;
      padding: 1.8em 2.2em;
      border-radius: 14px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.4);
      width: 420px;
      text-align: center;
      transition: transform 0.2s ease, box-shadow 0.3s ease;
    }

    .card:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(0,0,0,0.5);
    }

    h1 {
      font-size: 1.4em;
      margin-bottom: 0.8em;
      color: #fff;
      letter-spacing: 0.5px;
    }

    .summary {
      font-size: 0.95em;
      margin-bottom: 1.2em;
      line-height: 1.4em;
      color: #dcdcdc;
    }

    .progress-container {
      width: 100%;
      background-color: #333;
      border-radius: 8px;
      margin: 1em 0;
      height: 20px;
      overflow: hidden;
      display: flex;
    }

    .progress-human {
      background: linear-gradient(90deg, #4caf50, #81c784);
      height: 100%;
      transition: width 0.5s ease;
    }

    .progress-ai {
      background: linear-gradient(90deg, #f44336, #e57373);
      height: 100%;
      transition: width 0.5s ease;
    }

    .chart-container {
      width: 180px;
      margin: 1.5em auto;
    }

    .controls {
      margin-top: 1em;
    }

    .btn {
      background: linear-gradient(90deg, #2196f3, #42a5f5);
      border: none;
      border-radius: 6px;
      color: #fff;
      padding: 6px 14px;
      font-size: 0.9em;
      cursor: pointer;
      transition: background 0.2s ease;
    }

    .btn:hover {
      background: linear-gradient(90deg, #1976d2, #1e88e5);
    }

    canvas {
      max-width: 100%;
      height: auto;
    }
  </style>
</head>
<body>
  <div class="card">
    <h1>AI vs Human Code Stats</h1>
    <div id="summary" class="summary"></div>

    <div class="progress-container">
      <div id="bar-human" class="progress-human"></div>
      <div id="bar-ai" class="progress-ai"></div>
    </div>

    <div class="chart-container">
      <canvas id="pieChart"></canvas>
    </div>

    <div class="controls">
      <button id="resetBtn" class="btn">üîÑ Reset Stats</button>
    </div>
  </div>

  <script>
    const vscode = acquireVsCodeApi();
    vscode.postMessage('ready');

    let chart;
    const ctx = document.getElementById('pieChart').getContext('2d');

    function render(human, ai) {
      const total = human + ai || 1;
      const humanPct = ((human / total) * 100).toFixed(1);
      const aiPct = ((ai / total) * 100).toFixed(1);

      document.getElementById('summary').innerHTML = `
        üë®‚Äçüíª <b>${human}</b> lines (${humanPct}%)
        <br>ü§ñ <b>${ai}</b> lines (${aiPct}%)
        <br><br>üìä <b>Total:</b> ${total} lines
      `;

      document.getElementById('bar-human').style.width = humanPct + '%';
      document.getElementById('bar-ai').style.width = aiPct + '%';

      if (chart) chart.destroy();
      chart = new Chart(ctx, {
        type: 'doughnut',
        data: {
          labels: ['Human', 'AI'],
          datasets: [{
            data: [human, ai],
            backgroundColor: ['#4caf50', '#f44336'],
            borderColor: '#252526',
            borderWidth: 3,
            hoverOffset: 8,
          }],
        },
        options: {
          cutout: '70%', // smaller chart, more elegant
          plugins: {
            legend: {
              position: 'bottom',
              labels: { color: '#ccc', font: { size: 13 } },
            },
            tooltip: {
              backgroundColor: '#333',
              titleFont: { size: 13 },
              bodyFont: { size: 12 },
              callbacks: {
                label: (context) =>
                  `${context.label}: ${context.formattedValue} lines (${(
                    (context.parsed / total) *
                    100
                  ).toFixed(1)}%)`,
              },
            },
          },
          animation: {
            animateRotate: true,
            animateScale: true,
          },
        },
      });
    }

    // Initial render
    const humanInit = typeof HUMAN_VALUE !== 'undefined' ? HUMAN_VALUE : 0;
    const aiInit = typeof AI_VALUE !== 'undefined' ? AI_VALUE : 0;
    render(humanInit, aiInit);

    // Live updates
    window.addEventListener('message', event => {
      const { human, ai } = event.data || {};
      if (typeof human === 'number' && typeof ai === 'number') {
        render(human, ai);
      }
    });

    // Reset button
    document.getElementById('resetBtn').addEventListener('click', () => {
      vscode.postMessage({ command: 'reset' });
    });
  </script>
</body>
</html>
